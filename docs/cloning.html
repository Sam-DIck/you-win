<!doctype html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width, initial-scale=1.0">
<title>you-win: Cloning</title>

<style>
body, div, p, textarea, pre, ul, ol, li, blockquote, hr,table, tbody, thead, tr, td, th,h1, h2, h3, h4, h5, a, button, input {margin: 0;padding: 0;border: 0;font: inherit;color: inherit;list-style: none;text-decoration: none;}strong {font-weight: 600;}em {font-style: italic;color: #555;}* {line-height: 1.5;}a {white-space: normal;cursor: pointer;}body {font-family: Open Sans, BlinkMacSystemFont, -apple-system, Helvetica Neue, Ubuntu, Arial, Helvetica, sans-serif;font-size: 1rem;background: #fff;color: #000;font-size: 16px;min-height: calc(100vh - 2em);}p {margin: 0.75em 0;}body {margin: 1.5em auto 6em;padding: 0 2em;max-width: 72em;position: relative;}.emojione {width: 1.25em;height: 1.25em;line-height: 0.8em;}.prose {font-size: 1rem;max-width: 36em;font-weight: normal;margin: 0 auto;}.prose a {color: #3786e3;text-decoration: none;border-bottom: 1px solid #3786e3;}.prose h1 {font-weight: 300;font-size: 2rem;}.prose h2 {font-weight: 500;font-size: 1.5em;margin: 1.333em 0 0;border-top: 2px solid #ddd;padding-top: 0.666em;}.prose h3 {font-weight: 600;font-size: 1.25em;margin: 2em 0 0;}.prose pre, .prose code {border-radius: 0.25em;background: #f8f8f8;font-size: 0.875em;line-height: 1.5em;font-family: Menlo, monospace;}.prose pre {max-width: 100%;white-space: pre-wrap;margin: 1.09375em 0;overflow: hidden;padding: 0.25em 0.5em;}.prose code {padding: 0.125em;}.prose pre code {display: block;white-space: pre-wrap;border: none;padding: 0;background-color: transparent;border-radius: 0;font-size: inherit;line-height: inherit;}.prose > p {margin: 1.5em 0;}.prose > ul, .prose ol {margin: 1.5em 0;}.prose ul, .prose ol {padding-left: 1.875em;position: relative;}.prose ul > li {list-style: square;}.prose ol > li {list-style: none;counter-increment: step-count;}.prose ol > li:before {content: counter(step-count);font-weight: 500;display: inline-block;position: absolute;left: 0.5em;}.prose img,.prose video {max-width: 100%;object-fit: scale-down;height: auto;}.prose blockquote {margin: 1.5em 0;border-left: 0.25em solid #555;padding-left: 1em;color: #222;}@media print {body {max-width: 100%;font-size: 12pt;}.prose a {border-bottom: none;}.prose {margin: 0 auto;}nav {display: none;}pre, blockquote {padding-right: 1em;page-break-inside: avoid;}tr, img {page-break-inside: avoid;}@page {margin: 20mm 15mm 20mm 15mm;}p, h2, h3 {orphans: 3;widows: 3;}h2, h3 {page-break-after: avoid;}.prose pre {border-left: 2px solid #ccc;padding-left: 0.75em;border-radius: 0;page-break-after: avoid;}}nav {margin: -0.5em -2em;border-bottom: 1px solid #aaa;margin-bottom: 1.5em;color: #364149;}nav ul {padding: 0;margin: 0;}nav a {color: inherit;text-decoration: none;display: block;overflow: hidden;text-overflow: ellipsis;padding: 0.375em 2em;white-space: nowrap;}.title a {font-size: 2rem;padding: 0 1em;font-weight: 300;}.page {display: block;}.page-title-active,.page-heading-active {color: #3786e3;}.page-heading {display: block;padding-left: 1.5em;}@media screen and (min-width: 36rem) {body.has-nav {margin-left: 12rem;}nav {margin: 0;position: fixed;width: 12rem;left: 0;top: 0;bottom: 0;overflow-y: auto;font-size: 0.875em;border-right: 1px solid #aaa;background: #fafafa;border-bottom: 0;}nav a {padding: 0.375em 1em;}.title a {padding: 0.75em 0.5em 0.625em;}nav > ul {position: relative;min-height: 100vh;padding-bottom: 6em;box-sizing: border-box;}.page-as-pdf {position: absolute;bottom: 3em;}.logo {position: absolute;bottom: 1em;display: block;background: url("data:image/svg+xml,<svg viewBox='10 0 38 7' xmlns='http://www.w3.org/2000/svg'><path fill='%233786e3' d='M17 3h-1V1h1zM18 5h-1V3h1zM20 5h-1V3h1zM21 3h-1V1h1zM11 5h2v1h-3V1h1zM25 2h-2v1h2v1h-2v1h2v1h-3V1h3zM14 6V1h1v5zM18 5h1v1h-1z'/><path d='M42 2h-2v1h2v1h-2v1h2v1h-3V1h3zM30 5V1h1v4zM28 5V2h1v3zM32 6V1h1v5zM43 2h1v1h-1zM44 3h2v1h-2zM43 5h3v1h-3zM44 1h3v1h-3zM46 4h1v1h-1zM26 5V1h1v4zM27 5h1v1h-1zM29 5h1v1h-1zM34 6V1h3v1h-2v1h2v2h-1V4h-1v2zM37 5h1v1h-1zM37 2h1v1h-1z'/></svg>") 100% 0 no-repeat;margin: 0.5em 1em 0;height: 14px;width: 76px;}.logo span {display: none;}}.hljs { display: block; background: white; padding: 0.5em; color: #333333; overflow-x: auto; } .hljs-comment, .hljs-meta { color: #969896; } .hljs-string, .hljs-variable, .hljs-template-variable, .hljs-strong, .hljs-emphasis, .hljs-quote { color: #df5000; } .hljs-keyword, .hljs-selector-tag, .hljs-type { color: #a71d5d; } .hljs-literal, .hljs-symbol, .hljs-bullet, .hljs-attribute { color: #0086b3; } .hljs-section, .hljs-name { color: #63a35c; } .hljs-tag { color: #333333; } .hljs-title, .hljs-attr, .hljs-selector-id, .hljs-selector-class, .hljs-selector-attr, .hljs-selector-pseudo { color: #795da3; } .hljs-addition { color: #55a532; background-color: #eaffea; } .hljs-deletion { color: #bd2c00; background-color: #ffecec; } .hljs-link { text-decoration: underline; }
</style>

<body class=has-nav>

<nav id=nav>
    <ul>
        <h1 class=title><a href="https://github.com/livewires/you-win">you-win</a></h1>

        <li class=page><a href="install">Install</a>
        <li class=page><a href="00-new-world">00: New World</a>
        <li class=page><a href="01-creating-sprites">01: Creating Sprites</a>
        <li class=page><a href="02-position">02: Positioning</a>
        <li class=page><a href="03-random">03: Randomness</a>
        <li class=page><a href="04-forever">04: Animation</a>
        <li class=page><a href="05-events">05: Events</a>
        <li class=page><a href="06-recipes">06: Overview</a>
        <li class=page><a href="angles">Angles</a>
        <li class=page><a href="bouncing">Bouncing</a>
        <li class=page>
            <a href="#" class=page-title-active>Cloning</a>
            <ul>
                <li class=page-heading><a href="#functions">Functions</a>
                <li class=page-heading><a href="#copying-a-sprite">Copying a sprite</a>
                <li class=page-heading><a href="#delaying-the-copies">Delaying the copies</a>
                <li class=page-heading><a href="#on-tap">On tap</a>
                <li class=page-heading><a href="#moving-clones">Moving clones</a>
                <li class=page-heading><a href="#destroying-clones">Destroying clones</a>
            </ul>
        </li>
        <li class=page><a href="collisions">Collisions</a>
        <li class=page><a href="scoring">Scoring</a>
        <li class=page><a href="scrolling">Scrolling</a>
        <li class=page><a href="2-animation">#2: Animation</a>
        <li class=page><a href="reference">API Reference</a>

        <a class=page-as-pdf href="pdfs/cloning.pdf">Page as PDF ‚Üì</a>
        <a class=logo href="http://livewires.org.uk/"></a>
    </ul>
</nav>

<div class=prose>
<h1 id="cloning">Cloning</h1>
<p>This sheet explains how to create lots of copies of a sprite, without copy-pasting code. For example, making a bullet every time you tap, or making a new enemy every second.</p>
<h2 id="functions">Functions</h2>
<p>We can create more than one copy of a sprite by copying its code. But we don‚Äôt want to copy/paste the code every time we make a sprite!</p>
<p>We can write a <strong>function</strong> to make this easier. (This is just like a custom block in Scratch.) A function lets you give a name to a piece of code. When we want to run that code, we can refer to it by name, rather than copy/pasting the code again.</p>
<p>A function looks something like this. You can call it whatever you like, it doesn‚Äôt have to be <code>makeCow</code>.</p>
<pre><code class="lang-js">function makeCow() {
    ...
}
</code></pre>
<p>We then need to write the inside of our function, so our program knows how to make this sort of sprite.  Let‚Äôs start writing our function:</p>
<pre><code class="lang-js">function makeCow() {
    var cow = new Sprite
    cow.costume = &#39;<img class="emojione" alt="üêÑ" title=":cow2:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f404.png"/>&#39;
    ...
}
</code></pre>
<p>Let‚Äôs make one copy of our sprite, by ‚Äúcalling‚Äù our function. Add this at the <strong>end of your program</strong>, after the last <code>}</code> of our function.</p>
<pre><code class="lang-js">makeCow()
</code></pre>
<p>The brackets are important ‚Äì they tell JavaScript that this is a function we want to run.</p>
<p><img class="emojione" alt="üëâ" title=":point_right:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f449.png"/> Save, and check that the new sprite appears.</p>
<h2 id="copying-a-sprite">Copying a sprite</h2>
<p>Now we can easily create 100 copies of our sprite. This needs to go at the bottom of your program <strong>below the function</strong>, after the final <code>}</code> for the function.</p>
<pre><code class="lang-js">for (let num of uw.range(100)) {
    makeCow()
}
</code></pre>
<p><img class="emojione" alt="üëâ" title=":point_right:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f449.png"/> Make sure there are 100 sprites created. You‚Äôll need to randomize their positions (or something) or they‚Äôll all be overlapping each other in the middle!</p>
<h2 id="delaying-the-copies">Delaying the copies</h2>
<p>Or, if we wanted to make a new copy every 3 seconds, we could use <code>setInterval</code>. This allows us to give a function that we want to execute each time and the amount of time to wait in between.</p>
<pre><code class="lang-JS">setInterval(function() {
    makeCow()
}, 3000)
</code></pre>
<p>Note that the amount of time is in milliseconds (3000ms = 3seconds).</p>
<p>If you wanted to only wait <em>once</em>, rather than multiple times, you can use <code>setTimeout</code> in exactly the same way.</p>
<p>For more information on setTimeout and setInterval, including how to stop a <code>setInterval</code> from executing from running using <code>clearInterval</code>, have a look <a href="https://www.w3schools.com/js/js_timing.asp">here</a>.</p>
<h2 id="on-tap">On tap</h2>
<p>We can use our new function to create a sprite when you <a href="05-events#taps">tap the screen</a>. </p>
<pre><code class="lang-js">world.onTap(e =&gt; {
    makeCow()
})
</code></pre>
<h2 id="moving-clones">Moving clones</h2>
<p>It‚Äôs important to note that the <code>cow</code> variable can only be used inside our <code>makeCow</code> function. <strong>Variables in a function can only be used in that function.</strong></p>
<p>This means we can make variables specific to a clone by putting them inside the function. For example, we might decide to give our sprites gravity.</p>
<p>We‚Äôll start them off with a random amount of upward force. Put this <strong>at the top of your function</strong>.</p>
<pre><code class="lang-js">function makeCow() {
    var speedY = uw.randomInt(0, 10)
    ...
</code></pre>
<p>Now let‚Äôs make them fall due to gravity. Add this <code>forever</code> block <strong>at the bottom of your function</strong>, just before the final <code>}</code>.</p>
<pre><code class="lang-js">    cow.forever(() =&gt; {
        cow.posY += speedY
        speedY -= 0.5
    })
</code></pre>
<p>Your final function should look something like this:</p>
<pre><code class="lang-js">function makeCow() {
    var speedY = uw.randomInt(0, 10)

    var cow = new Sprite
    cow.costume = &#39;<img class="emojione" alt="üêÑ" title=":cow2:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f404.png"/>&#39;

    cow.forever(() =&gt; {
        cow.posY += speedY
        speedY -= 0.5
    })
}
</code></pre>
<p><img class="emojione" alt="üëâ" title=":point_right:" src="https://cdn.jsdelivr.net/emojione/assets/3.1/png/32/1f449.png"/> Save, and check the sprites fall down independently. </p>
<p>Each sprite made by our function gets its own <code>speedY</code>.</p>
<h2 id="destroying-clones">Destroying clones</h2>
<p>If we keep creating sprites, but never destroy them, then the number of sprites in our world will grow and eventually our game will get really slow! We can fix that by destroying sprites once they‚Äôre no longer needed.</p>
<p>For example, we can destroy sprites when they go off-screen. Add this <strong>inside your sprite‚Äôs <code>forever</code> block</strong>.</p>
<pre><code class="lang-js">    if (!cow.isOnScreen()) {
        cow.destroy()
    }
</code></pre>
<p>Destroying a sprite removes it from the screen permanently. This also stops any <code>forever</code> loops attached to it.</p>

</div>

<script async id=highlight-js src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
<script>
document.querySelector('#highlight-js').addEventListener('load', function() {
    [].slice.apply(document.querySelectorAll('pre code')).forEach(function(b) {
        hljs.highlightBlock(b)
    })
})
</script>

<script async src="static/scroll.js"></script>

